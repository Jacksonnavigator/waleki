{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{MessageCircle,X,Send,Minimize2,Maximize2}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Chatbot=()=>{const{currentUser}=useAuth();const[isOpen,setIsOpen]=useState(false);const[isMinimized,setIsMinimized]=useState(false);const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isTyping,setIsTyping]=useState(false);const messagesEndRef=useRef(null);const inputRef=useRef(null);// Get time-based greeting\nconst getTimeBasedGreeting=()=>{var _currentUser$displayN;const hour=new Date().getHours();const name=(currentUser===null||currentUser===void 0?void 0:(_currentUser$displayN=currentUser.displayName)===null||_currentUser$displayN===void 0?void 0:_currentUser$displayN.split(' ')[0])||'there';if(hour>=5&&hour<12){return\"Good morning, \".concat(name,\"! \\u2600\\uFE0F Ready to monitor your water wells today?\");}else if(hour>=12&&hour<17){return\"Good afternoon, \".concat(name,\"! \\uD83D\\uDC4B How can I help with your water monitoring?\");}else if(hour>=17&&hour<21){return\"Good evening, \".concat(name,\"! \\uD83C\\uDF06 What can I assist you with?\");}else{return\"Hey \".concat(name,\"! \\uD83C\\uDF19 Working late? I'm here to help!\");}};// Initialize with time-based greeting\nuseEffect(()=>{setMessages([{type:'bot',message:getTimeBasedGreeting(),timestamp:new Date()}]);},[currentUser]);// Auto-scroll to bottom\nconst scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);// Focus input when opened\nuseEffect(()=>{if(isOpen&&!isMinimized){var _inputRef$current;(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();}},[isOpen,isMinimized]);// Get user's first name\nconst getUserName=()=>{var _currentUser$displayN2;return(currentUser===null||currentUser===void 0?void 0:(_currentUser$displayN2=currentUser.displayName)===null||_currentUser$displayN2===void 0?void 0:_currentUser$displayN2.split(' ')[0])||'friend';};// Enhanced AI Response Logic with more human-like interactions\nconst getBotResponse=input=>{const lower=input.toLowerCase();const name=getUserName();// Greetings with time awareness\nif(lower.match(/^(hi|hello|hey|good morning|good afternoon|good evening|sup|yo|hola)/)){const hour=new Date().getHours();const greetings=[\"Hey \".concat(name,\"! \\uD83D\\uDE0A What brings you here today?\"),\"Hello! I'm all ears. What would you like to know?\",\"Hi there! Ready to tackle some water monitoring questions?\",hour<12?\"Good morning! \\u2615 How can I brighten your day?\":\"Hey! \\uD83D\\uDC4B What's on your mind?\"];return greetings[Math.floor(Math.random()*greetings.length)];}// How are you / Personal\nif(lower.match(/(how are you|how're you|hows it going|whats up|wassup)/)){return\"I'm doing great, thanks for asking! \\uD83D\\uDE0A As an AI assistant, I'm always ready to help. How about you? Everything running smoothly with your water monitoring system?\";}// Thank you responses\nif(lower.match(/(thank|thanks|thx|appreciate|grateful)/)){const responses=[\"You're very welcome, \".concat(name,\"! \\uD83D\\uDE0A Happy to help anytime!\"),\"My pleasure! That's what I'm here for. Need anything else?\",\"Glad I could help! Feel free to ask me anything else.\",\"You're welcome! Don't hesitate to reach out if you need more help! \\uD83D\\uDC4D\"];return responses[Math.floor(Math.random()*responses.length)];}// Goodbye / See you\nif(lower.match(/(bye|goodbye|see you|later|gtg|gotta go)/)){const hour=new Date().getHours();const farewells=[\"Goodbye, \".concat(name,\"! Have a wonderful \").concat(hour<17?'day':'evening',\"! \\uD83D\\uDC4B\"),\"See you later! Don't hesitate to come back if you need help! \\uD83D\\uDE0A\",\"Take care! Your water wells are in good hands! \\uD83D\\uDCA7\",\"Catch you later! Stay hydrated! \\uD83D\\uDCA6\\uD83D\\uDE04\"];return farewells[Math.floor(Math.random()*farewells.length)];}// Good / Great / Awesome responses\nif(lower.match(/^(good|great|awesome|excellent|perfect|nice|cool|wonderful)/)){return\"That's awesome to hear! \\uD83C\\uDF89 Is there anything else I can help you with?\";}// Yes / No responses\nif(lower==='yes'||lower==='yeah'||lower==='yep'||lower==='sure'){return\"Great! What would you like to know about? I can help with:\\n\\u2022 Adding nodes\\n\\u2022 Troubleshooting issues\\n\\u2022 Understanding calculations\\n\\u2022 System settings\\n\\nJust ask away! \\uD83D\\uDE0A\";}if(lower==='no'||lower==='nope'||lower==='nah'){return\"No worries! I'm here whenever you need me. Feel free to ask if anything comes up! \\uD83D\\uDC4D\";}// Who are you / About bot\nif(lower.match(/(who are you|what are you|your name|about you)/)){return\"I'm Waleki Assistant! \\uD83E\\uDD16 Your friendly AI helper for all things water monitoring.\\n\\nI can help you with:\\n\\u2022 Setting up sensor nodes\\n\\u2022 Understanding water calculations\\n\\u2022 Troubleshooting problems\\n\\u2022 Navigating the system\\n\\u2022 And much more!\\n\\nThink of me as your 24/7 water monitoring expert! \\uD83D\\uDCA7\";}// Add node - detailed\nif(lower.match(/(add|create|setup|install|new).*(node|sensor|device)/)){return\"Great! Let me walk you through adding a new sensor node! \\uD83C\\uDFAF\\n\\n**Step-by-step:**\\n1\\uFE0F\\u20E3 Go to **Settings** \\u2192 **Nodes tab**\\n2\\uFE0F\\u20E3 Scroll to the form at bottom\\n3\\uFE0F\\u20E3 Enter **Node ID** (like \\\"Node4\\\" or \\\"Well-East\\\")\\n4\\uFE0F\\u20E3 Enter **Cable Length (h\\u2081)** in meters\\n   \\uD83D\\uDCCF *This is SUPER important - measure carefully!*\\n5\\uFE0F\\u20E3 Add **Location** (e.g., \\\"Mwanza Region\\\")\\n6\\uFE0F\\u20E3 Check **\\\"Activate immediately\\\"** if ready\\n7\\uFE0F\\u20E3 Click **\\\"Add Node\\\"** button\\n\\n\\u2705 Done! Your node will show up in the Dashboard!\\n\\nNeed help measuring cable length? Just ask! \\uD83D\\uDE0A\";}// Cable length / h1 - detailed\nif(lower.match(/(cable|h1|h‚ÇÅ|measure|length|depth)/)){return\"Ah, cable length - the foundation of accurate readings! \\uD83D\\uDCCF\\n\\n**What is h\\u2081?**\\nIt's the total distance from ground surface to the END of your sensor cable.\\n\\n**Why is it critical?**\\nWater Height = h\\u2081 - h\\u2082\\n\\u2022 h\\u2081 = Your cable length (FIXED, you measure once)\\n\\u2022 h\\u2082 = Sensor reading (CHANGES, real-time from sensor)\\n\\u2022 H = Actual water height (CALCULATED)\\n\\n**Example:**\\n\\u2022 Cable goes down 50 meters (h\\u2081 = 50m)\\n\\u2022 Sensor reads 45m from surface (h\\u2082 = 45m)\\n\\u2022 Water height = 50 - 45 = **5 meters of water** \\uD83D\\uDCA7\\n\\n**Pro tip:** If your water shows 0m but there IS water, your h\\u2081 is probably too small! Remeasure and update it in Settings.\\n\\nMake sense? Let me know if you need clarification! \\uD83E\\uDD13\";}// Notifications / Alerts - detailed\nif(lower.match(/(notification|alert|push|bell|email|sms)/)){return\"Let's get you set up with notifications! \\uD83D\\uDD14\\n\\n**Quick Setup:**\\n1\\uFE0F\\u20E3 Click the **bell icon (\\uD83D\\uDD14)** in the navbar\\n2\\uFE0F\\u20E3 Click **\\\"Enable Notifications\\\"**\\n3\\uFE0F\\u20E3 Allow permissions when browser asks\\n4\\uFE0F\\u20E3 You'll get a test notification!\\n\\n**You'll receive alerts for:**\\n\\uD83D\\uDEA8 **Critical:** Sensor offline, no water\\n\\u26A0\\uFE0F **Warning:** Low water, battery low\\n\\u2139\\uFE0F **Info:** Sensor back online, daily reports\\n\\n**Want to customize?**\\nGo to Settings \\u2192 System to adjust:\\n\\u2022 How often to check\\n\\u2022 When to alert\\n\\u2022 Which alert types\\n\\n**Pro tip:** You can also get SMS & email alerts! Check Settings \\u2192 Preferences to enable them.\\n\\nLet me know if you hit any snags! \\uD83D\\uDE0A\";}// Offline sensor - detailed\nif(lower.match(/(offline|not working|down|disconnected|no signal|connection)/)){return\"Sensor offline? Don't worry, let's troubleshoot! \\uD83D\\uDD27\\n\\n**Quick Checks:**\\n\\n1\\uFE0F\\u20E3 **Power Supply**\\n   \\u2713 Is the sensor powered on?\\n   \\u2713 Check battery level\\n   \\u2713 Solar panel clean and working?\\n\\n2\\uFE0F\\u20E3 **Physical Connections**\\n   \\u2713 All cables firmly connected?\\n   \\u2713 No visible damage to wires?\\n   \\u2713 Waterproof seals intact?\\n\\n3\\uFE0F\\u20E3 **Sensor Position**\\n   \\u2713 Is sensor within 5m of cable end?\\n   \\u2713 Any obstructions?\\n   \\u2713 Proper alignment?\\n\\n4\\uFE0F\\u20E3 **Check System Logs**\\n   \\uD83D\\uDCCA Go to **Health** \\u2192 **System Logs**\\n   Look for error messages\\n\\n5\\uFE0F\\u20E3 **Network Range**\\n   \\uD83D\\uDCE1 Too far from gateway? (Max 2-15km)\\n   Buildings blocking signal?\\n\\n**Still offline?**\\nTry a soft reset: Power off \\u2192 Wait 30s \\u2192 Power on\\n\\nIf nothing works, our support team is ready! Contact: support@waleki.com\\n\\nHope this helps! \\uD83E\\uDD1E\";}// Water shows 0m - detailed\nif(lower.match(/(water.*0|zero.*water|shows.*0|0.*meter|no.*water|empty)/)){return\"Water showing 0m but you know there's water? I can fix that! \\uD83D\\uDCA7\\n\\n**The Problem:**\\nThis happens when h\\u2082 \\u2265 h\\u2081 (sensor reading \\u2265 cable length)\\n\\n**Translation:**\\nThe sensor thinks it's reading deeper than your cable reaches, which is impossible! So it displays 0m.\\n\\n**The Solution:**\\n\\n1\\uFE0F\\u20E3 **Check Your h\\u2081 (Cable Length):**\\n   \\u2022 Go to **Settings** \\u2192 **Nodes tab**\\n   \\u2022 Find your node in the list\\n   \\u2022 Check the h\\u2081 value - is it correct?\\n\\n2\\uFE0F\\u20E3 **Update if Wrong:**\\n   \\u2022 Click the **edit icon (\\u270F\\uFE0F)**\\n   \\u2022 Enter the CORRECT cable length\\n   \\u2022 Save changes\\n\\n3\\uFE0F\\u20E3 **Verify:**\\n   \\u2022 Go to Dashboard\\n   \\u2022 Check if water height now shows correctly\\n\\n**Example Fix:**\\n\\u274C Before: h\\u2081 = 40m, h\\u2082 = 45m \\u2192 Shows 0m (ERROR!)\\n\\u2705 After: h\\u2081 = 50m, h\\u2082 = 45m \\u2192 Shows 5m (CORRECT!)\\n\\n**Pro Tip:** Always measure your cable length from ground surface to the ABSOLUTE END of the cable. Don't estimate - use a tape measure! \\uD83D\\uDCCF\\n\\nDid that solve it? Let me know! \\uD83D\\uDE0A\";}// Backup / Export - detailed\nif(lower.match(/(backup|export|save|download|config)/)){return\"Smart thinking - backups are crucial! \\uD83D\\uDCBE\\n\\n**To Backup Your Configuration:**\\n\\n1\\uFE0F\\u20E3 Go to **Settings** \\u2192 **Backup tab**\\n2\\uFE0F\\u20E3 Click the big **\\\"Export\\\"** button\\n3\\uFE0F\\u20E3 A JSON file downloads automatically\\n   \\uD83D\\uDCC1 Filename: waleki-config-[timestamp].json\\n4\\uFE0F\\u20E3 **Store it safely!**\\n   \\u2022 Google Drive\\n   \\u2022 Dropbox\\n   \\u2022 External hard drive\\n   \\u2022 USB stick\\n\\n**What's Included:**\\n\\u2713 All sensor node configurations\\n\\u2713 System settings\\n\\u2713 User preferences  \\n\\u2713 Alert thresholds\\n\\u2713 Notification settings\\n\\n**To Restore Later:**\\n\\u2022 Same tab, click **\\\"Import\\\"**\\n\\u2022 Select your backup file\\n\\u2022 Confirm (it will overwrite current settings)\\n\\n**Pro Tip:** Make backups:\\n\\u2022 Before major changes\\n\\u2022 Once a month\\n\\u2022 Before system updates\\n\\nYour future self will thank you! \\uD83D\\uDE4F\";}// Dashboard / Pages / Navigation\nif(lower.match(/(dashboard|page|where|navigate|go to|find)/)){return\"Let me give you a tour of Waleki! \\uD83D\\uDDFA\\uFE0F\\n\\n**Main Pages:**\\n\\n\\uD83C\\uDFE0 **Dashboard** - Your home base\\n   \\u2022 See all active nodes at once\\n   \\u2022 Real-time water levels\\n   \\u2022 Status indicators\\n   \\u2022 Quick stats\\n\\n\\uD83D\\uDCCA **Monitor** - Deep dive single nodes\\n   \\u2022 Select specific node\\n   \\u2022 Live sensor data\\n   \\u2022 Detailed readings\\n   \\u2022 Historical mini-chart\\n\\n\\uD83D\\uDCC8 **Analytics** - Data analysis paradise\\n   \\u2022 Compare multiple nodes\\n   \\u2022 Charts & graphs\\n   \\u2022 Export data (CSV/JSON)\\n   \\u2022 Custom date ranges\\n\\n\\uD83C\\uDFE5 **Health** - System diagnostics\\n   \\u2022 All nodes overview\\n   \\u2022 System logs\\n   \\u2022 Error tracking\\n   \\u2022 Performance metrics\\n\\n\\u2699\\uFE0F **Settings** - Configuration central\\n   \\u2022 Add/edit nodes\\n   \\u2022 System settings\\n   \\u2022 Backup/restore\\n   \\u2022 Preferences\\n\\n\\uD83D\\uDC64 **Profile** - Your account\\n   \\u2022 Personal info\\n   \\u2022 Security settings\\n   \\u2022 Activity log\\n   \\u2022 Data export\\n\\n\\u2753 **Help** - Knowledge base\\n   \\u2022 FAQs\\n   \\u2022 Tutorials\\n   \\u2022 Contact support\\n\\nWhere would you like to go? \\uD83D\\uDE0A\";}// Status colors / Indicators\nif(lower.match(/(status|color|indicator|green|red|yellow|orange|meaning)/)){return\"Let me decode those colors for you! \\uD83C\\uDFA8\\n\\n**Node Status Colors:**\\n\\n\\uD83D\\uDFE2 **Active (Green)** - All good!\\n   \\u2022 Water level > 10 meters\\n   \\u2022 Sensor online & working\\n   \\u2022 No issues detected\\n   \\u2022 Keep monitoring normally\\n\\n\\uD83D\\uDFE1 **Warning (Yellow)** - Pay attention\\n   \\u2022 Water level 5-10 meters\\n   \\u2022 Still safe, but decreasing\\n   \\u2022 Monitor more frequently\\n   \\u2022 Consider water conservation\\n\\n\\uD83D\\uDFE0 **Low (Orange)** - Take action soon\\n   \\u2022 Water level 0-5 meters\\n   \\u2022 Getting critically low\\n   \\u2022 Plan alternative sources\\n   \\u2022 Alert relevant people\\n\\n\\uD83D\\uDD34 **Critical (Red)** - Immediate action!\\n   \\u2022 Water \\u2264 0 meters (empty/error)\\n   \\u2022 Sensor offline for 5+ minutes\\n   \\u2022 System error detected\\n   \\u2022 Check sensor immediately!\\n\\n\\u26AA **Inactive (Gray)** - Not monitoring\\n   \\u2022 Node exists but deactivated\\n   \\u2022 Not collecting data\\n   \\u2022 Enable in Settings if needed\\n\\n**Pro Tip:** You can customize these thresholds in Settings \\u2192 System to match your specific needs!\\n\\nMake sense? \\uD83D\\uDC4D\";}// Formula / Math / Calculation\nif(lower.match(/(formula|calculate|math|equation|h1|h2)/)){return\"Let's break down the water height formula! \\uD83E\\uDDEE\\n\\n**The Formula:**\\n**H = h\\u2081 - h\\u2082**\\n\\nSimple subtraction, but each variable is critical!\\n\\n**What Each Means:**\\n\\n\\uD83D\\uDCCF **h\\u2081** (Cable Length)\\n   \\u2022 Distance: Ground \\u2192 End of cable\\n   \\u2022 FIXED value (you measure once)\\n   \\u2022 YOU set this in Settings\\n   \\u2022 Must be VERY accurate!\\n\\n\\uD83D\\uDCE1 **h\\u2082** (Sensor Reading)\\n   \\u2022 Distance: Ground \\u2192 Water surface\\n   \\u2022 CHANGES in real-time\\n   \\u2022 From ultrasonic sensor\\n   \\u2022 Updates automatically\\n\\n\\uD83D\\uDCA7 **H** (Water Height)\\n   \\u2022 Actual water depth in well\\n   \\u2022 CALCULATED automatically\\n   \\u2022 h\\u2081 minus h\\u2082\\n   \\u2022 What you see on Dashboard\\n\\n**Real Example:**\\nYour well setup:\\n\\u2022 Cable goes 50m deep (h\\u2081 = 50)\\n\\u2022 Sensor reads 45m to water (h\\u2082 = 45)\\n\\u2022 Water depth: 50 - 45 = **5 meters** \\u2705\\n\\nAs water rises:\\n\\u2022 h\\u2082 becomes 40m\\n\\u2022 H = 50 - 40 = **10 meters** \\u2705\\n\\nAs water lowers:\\n\\u2022 h\\u2082 becomes 48m  \\n\\u2022 H = 50 - 48 = **2 meters** (Low!) \\u26A0\\uFE0F\\n\\nIf h\\u2082 \\u2265 h\\u2081:\\n\\u2022 Math gives negative\\n\\u2022 System shows 0m (error)\\n\\u2022 Check your h\\u2081 value!\\n\\nCrystal clear? \\uD83D\\uDC8E\";}// Password / Login / Security\nif(lower.match(/(password|login|forgot|reset|security|2fa|two factor)/)){return\"Let's secure your account! \\uD83D\\uDD10\\n\\n**Change Password:**\\n1\\uFE0F\\u20E3 Go to **Profile** \\u2192 **Security tab**\\n2\\uFE0F\\u20E3 Enter current password\\n3\\uFE0F\\u20E3 Enter new password (min 6 chars)\\n4\\uFE0F\\u20E3 Confirm new password\\n5\\uFE0F\\u20E3 Click \\\"Change Password\\\"\\n6\\uFE0F\\u20E3 You'll be logged out - sign in again\\n\\n**Forgot Password:**\\n\\u2022 Go to Login page\\n\\u2022 Click \\\"Forgot Password?\\\" link\\n\\u2022 Enter your email\\n\\u2022 Check inbox for reset link\\n\\u2022 Link valid for 1 hour\\n\\u2022 Set new password\\n\\n**Enable Two-Factor Authentication:**\\n1\\uFE0F\\u20E3 Profile \\u2192 Security tab\\n2\\uFE0F\\u20E3 Find \\\"Two-Factor Authentication\\\"\\n3\\uFE0F\\u20E3 Click \\\"Enable 2FA\\\"\\n4\\uFE0F\\u20E3 Follow setup wizard\\n5\\uFE0F\\u20E3 Scan QR code with authenticator app\\n6\\uFE0F\\u20E3 Enter verification code\\n\\n**Security Tips:**\\n\\u2713 Use strong, unique passwords\\n\\u2713 Enable 2FA for extra security\\n\\u2713 Don't share login credentials\\n\\u2713 Log out on shared devices\\n\\u2713 Check activity log regularly\\n\\nYour account, your fortress! \\uD83C\\uDFF0\";}// Help / Support / Contact\nif(lower.match(/(help|support|contact|call|email|assistance|stuck)/)){return\"I'm here to help, and so is our team! \\uD83E\\uDD1D\\n\\n**Get Support:**\\n\\n\\uD83D\\uDCE7 **Email Support**\\n   \\u2022 support@waleki.com\\n   \\u2022 Response time: < 24 hours\\n   \\u2022 Include screenshots if possible\\n   \\u2022 Mention your node IDs\\n\\n\\uD83D\\uDCDE **Phone Support**\\n   \\u2022 +255 XXX XXX XXX\\n   \\u2022 Mon-Fri: 8 AM - 6 PM EAT\\n   \\u2022 Weekend: Emergency only\\n   \\u2022 Have account info ready\\n\\n\\uD83D\\uDCAC **Live Chat**\\n   \\u2022 Right here with me! (for quick questions)\\n   \\u2022 24/7 availability\\n   \\u2022 Instant responses\\n   \\u2022 No waiting!\\n\\n\\uD83D\\uDCDA **Help Center**\\n   \\u2022 Click \\\"Help\\\" in navbar\\n   \\u2022 30+ detailed articles\\n   \\u2022 Step-by-step guides\\n   \\u2022 Search by keyword\\n\\n**What I Can Help With:**\\n\\u2713 Adding/configuring nodes\\n\\u2713 Understanding readings\\n\\u2713 Troubleshooting issues\\n\\u2713 System navigation\\n\\u2713 Calculations & formulas\\n\\u2713 Settings & preferences\\n\\u2713 Quick how-tos\\n\\nWhat do you need help with? \\uD83D\\uDE0A\";}// Default / Unknown\nreturn\"Hmm, I'm not quite sure about that one! \\uD83E\\uDD14\\n\\nBut I'm always learning! Here's what I'm really good at:\\n\\n**Popular Topics:**\\n\\u2022 \\uD83D\\uDD27 \\\"How do I add a node?\\\"\\n\\u2022 \\uD83D\\uDCA7 \\\"Why does water show 0m?\\\"\\n\\u2022 \\uD83D\\uDD14 \\\"Enable notifications\\\"\\n\\u2022 \\uD83D\\uDCCF \\\"Explain the water formula\\\"\\n\\u2022 \\uD83D\\uDEA8 \\\"Sensor is offline\\\"\\n\\u2022 \\u2699\\uFE0F \\\"Change settings\\\"\\n\\u2022 \\uD83D\\uDCBE \\\"Backup my configuration\\\"\\n\\u2022 \\uD83D\\uDCCA \\\"View analytics\\\"\\n\\u2022 \\uD83D\\uDD10 \\\"Reset my password\\\"\\n\\n**Or Just Chat:**\\n\\u2022 Ask how I'm doing\\n\\u2022 Say hello\\n\\u2022 Tell me what you need\\n\\nI'm here to help! What's on your mind? \\uD83D\\uDE0A\";};// Handle send message\nconst handleSend=()=>{if(!inputMessage.trim())return;// Add user message\nconst userMessage={type:'user',message:inputMessage,timestamp:new Date()};setMessages([...messages,userMessage]);const currentInput=inputMessage;setInputMessage('');// Show typing indicator\nsetIsTyping(true);// Simulate realistic typing delay (longer for longer responses)\nconst typingDelay=Math.min(800+currentInput.length*20,2000);setTimeout(()=>{const botResponse={type:'bot',message:getBotResponse(currentInput),timestamp:new Date()};setMessages(prev=>[...prev,botResponse]);setIsTyping(false);},typingDelay);};// Handle key press\nconst handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSend();}};// Get user avatar (profile photo or initials)\nconst getUserAvatar=()=>{var _currentUser$displayN3;if(currentUser!==null&&currentUser!==void 0&&currentUser.photoURL){return/*#__PURE__*/_jsx(\"img\",{src:currentUser.photoURL,alt:\"You\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}});}const initials=(currentUser===null||currentUser===void 0?void 0:(_currentUser$displayN3=currentUser.displayName)===null||_currentUser$displayN3===void 0?void 0:_currentUser$displayN3.split(' ').map(n=>n[0]).join('').substring(0,2).toUpperCase())||'U';return/*#__PURE__*/_jsx(\"span\",{children:initials});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        @keyframes slideUp {\\n          from {\\n            transform: translateY(100px);\\n            opacity: 0;\\n          }\\n          to {\\n            transform: translateY(0);\\n            opacity: 1;\\n          }\\n        }\\n\\n        @keyframes pulse {\\n          0%, 100% {\\n            transform: scale(1);\\n          }\\n          50% {\\n            transform: scale(1.05);\\n          }\\n        }\\n\\n        @keyframes typing {\\n          0%, 100% {\\n            opacity: 0.3;\\n          }\\n          50% {\\n            opacity: 1;\\n          }\\n        }\\n\\n        .chatbot-container {\\n          position: fixed;\\n          bottom: 24px;\\n          right: 24px;\\n          z-index: 9999;\\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\\n        }\\n\\n        /* Avatar Button */\\n        .chatbot-avatar {\\n          width: 64px;\\n          height: 64px;\\n          background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\\n          border-radius: 50%;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          cursor: pointer;\\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\\n          transition: all 0.3s ease;\\n          border: 4px solid white;\\n          color: white;\\n          animation: pulse 2s ease-in-out infinite;\\n        }\\n\\n        .chatbot-avatar:hover {\\n          transform: scale(1.1);\\n          box-shadow: 0 12px 32px rgba(0, 0, 0, 0.6);\\n        }\\n\\n        .chatbot-avatar.open {\\n          animation: none;\\n        }\\n\\n        /* Chat Window */\\n        .chat-window {\\n          position: absolute;\\n          bottom: 80px;\\n          right: 0;\\n          width: 400px;\\n          max-height: \".concat(isMinimized?'60px':'600px',\";\\n          background: white;\\n          border-radius: 16px;\\n          box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);\\n          display: flex;\\n          flex-direction: column;\\n          overflow: hidden;\\n          animation: slideUp 0.3s ease;\\n          transition: max-height 0.3s ease;\\n        }\\n\\n        /* Header */\\n        .chat-header {\\n          padding: 20px;\\n          background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\\n          color: white;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n        }\\n\\n        .header-info {\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n        }\\n\\n        .header-avatar {\\n          width: 40px;\\n          height: 40px;\\n          background: rgba(255, 255, 255, 0.2);\\n          border-radius: 50%;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          backdrop-filter: blur(10px);\\n        }\\n\\n        .header-text h3 {\\n          font-size: 16px;\\n          font-weight: 700;\\n          margin-bottom: 2px;\\n        }\\n\\n        .header-text p {\\n          font-size: 12px;\\n          opacity: 0.9;\\n        }\\n\\n        .header-actions {\\n          display: flex;\\n          gap: 8px;\\n        }\\n\\n        .header-btn {\\n          width: 32px;\\n          height: 32px;\\n          background: rgba(255, 255, 255, 0.2);\\n          border: none;\\n          border-radius: 8px;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          cursor: pointer;\\n          transition: all 0.2s ease;\\n          color: white;\\n          backdrop-filter: blur(10px);\\n        }\\n\\n        .header-btn:hover {\\n          background: rgba(255, 255, 255, 0.3);\\n        }\\n\\n        /* Messages */\\n        .chat-messages {\\n          flex: 1;\\n          padding: 20px;\\n          overflow-y: auto;\\n          display: \").concat(isMinimized?'none':'flex',\";\\n          flex-direction: column;\\n          gap: 16px;\\n          background: #FAFAFA;\\n          max-height: 440px;\\n        }\\n\\n        .chat-messages::-webkit-scrollbar {\\n          width: 6px;\\n        }\\n\\n        .chat-messages::-webkit-scrollbar-track {\\n          background: #F0F0F0;\\n        }\\n\\n        .chat-messages::-webkit-scrollbar-thumb {\\n          background: #CCC;\\n          border-radius: 3px;\\n        }\\n\\n        .message {\\n          display: flex;\\n          gap: 10px;\\n          animation: slideUp 0.2s ease;\\n        }\\n\\n        .message.user {\\n          flex-direction: row-reverse;\\n        }\\n\\n        .message-avatar {\\n          width: 32px;\\n          height: 32px;\\n          border-radius: 50%;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          flex-shrink: 0;\\n          font-size: 14px;\\n          font-weight: 700;\\n        }\\n\\n        .message-avatar.bot {\\n          background: #000;\\n          color: white;\\n        }\\n\\n        .message-avatar.user {\\n          background: #E8E8E8;\\n          color: #000;\\n        }\\n\\n        .message-content {\\n          max-width: 75%;\\n          padding: 12px 16px;\\n          border-radius: 12px;\\n          font-size: 14px;\\n          line-height: 1.6;\\n          white-space: pre-line;\\n        }\\n\\n        .message.bot .message-content {\\n          background: white;\\n          color: #000;\\n          border: 1px solid #E8E8E8;\\n        }\\n\\n        .message.user .message-content {\\n          background: #000;\\n          color: white;\\n        }\\n\\n        .message-content strong {\\n          font-weight: 700;\\n        }\\n\\n        /* Typing Indicator */\\n        .typing-indicator {\\n          display: flex;\\n          gap: 10px;\\n          padding: 12px 16px;\\n          background: white;\\n          border-radius: 12px;\\n          width: fit-content;\\n          border: 1px solid #E8E8E8;\\n        }\\n\\n        .typing-dot {\\n          width: 8px;\\n          height: 8px;\\n          background: #999;\\n          border-radius: 50%;\\n          animation: typing 1.4s ease-in-out infinite;\\n        }\\n\\n        .typing-dot:nth-child(2) {\\n          animation-delay: 0.2s;\\n        }\\n\\n        .typing-dot:nth-child(3) {\\n          animation-delay: 0.4s;\\n        }\\n\\n        /* Input */\\n        .chat-input-wrapper {\\n          padding: 16px;\\n          background: white;\\n          border-top: 1px solid #E8E8E8;\\n          display: \").concat(isMinimized?'none':'flex',\";\\n          gap: 12px;\\n        }\\n\\n        .chat-input {\\n          flex: 1;\\n          padding: 12px 16px;\\n          border: 2px solid #E8E8E8;\\n          border-radius: 12px;\\n          font-size: 14px;\\n          outline: none;\\n          transition: all 0.2s ease;\\n          font-family: inherit;\\n          resize: none;\\n          max-height: 100px;\\n        }\\n\\n        .chat-input:focus {\\n          border-color: #000;\\n        }\\n\\n        .send-btn {\\n          width: 44px;\\n          height: 44px;\\n          background: #000;\\n          color: white;\\n          border: none;\\n          border-radius: 12px;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          cursor: pointer;\\n          transition: all 0.2s ease;\\n          flex-shrink: 0;\\n        }\\n\\n        .send-btn:hover {\\n          transform: scale(1.05);\\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);\\n        }\\n\\n        .send-btn:disabled {\\n          opacity: 0.5;\\n          cursor: not-allowed;\\n          transform: none;\\n        }\\n\\n        /* Responsive */\\n        @media (max-width: 640px) {\\n          .chat-window {\\n            width: calc(100vw - 48px);\\n            max-width: 400px;\\n          }\\n\\n          .chatbot-container {\\n            right: 16px;\\n            bottom: 16px;\\n          }\\n        }\\n      \")}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot-container\",children:[isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/chatbot.png\",alt:\"Bot\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-text\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Waleki Assistant\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Always here to help\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"header-btn\",onClick:()=>setIsMinimized(!isMinimized),title:isMinimized?'Maximize':'Minimize',children:isMinimized?/*#__PURE__*/_jsx(Maximize2,{size:16}):/*#__PURE__*/_jsx(Minimize2,{size:16})}),/*#__PURE__*/_jsx(\"button\",{className:\"header-btn\",onClick:()=>setIsOpen(false),title:\"Close\",children:/*#__PURE__*/_jsx(X,{size:16})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",children:[messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(msg.type),children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-avatar \".concat(msg.type),children:msg.type==='bot'?/*#__PURE__*/_jsx(\"img\",{src:\"/assets/chatbot.png\",alt:\"Bot\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}}):getUserAvatar()}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:msg.message})]},index)),isTyping&&/*#__PURE__*/_jsxs(\"div\",{className:\"message bot\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-avatar bot\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/chatbot.png\",alt:\"Bot\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"typing-dot\"})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-wrapper\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,className:\"chat-input\",placeholder:\"Type your message...\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),onKeyPress:handleKeyPress,rows:\"1\"}),/*#__PURE__*/_jsx(\"button\",{className:\"send-btn\",onClick:handleSend,disabled:!inputMessage.trim(),title:\"Send message\",children:/*#__PURE__*/_jsx(Send,{size:20})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatbot-avatar \".concat(isOpen?'open':''),onClick:()=>setIsOpen(!isOpen),title:\"Chat with Waleki Assistant\",children:isOpen?/*#__PURE__*/_jsx(X,{size:28}):/*#__PURE__*/_jsx(\"img\",{src:\"/assets/chatbot.png\",alt:\"Bot\",style:{width:'100%',height:'100%',borderRadius:'50%',objectFit:'cover'}})})]})]});};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","useRef","MessageCircle","X","Send","Minimize2","Maximize2","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chatbot","currentUser","isOpen","setIsOpen","isMinimized","setIsMinimized","messages","setMessages","inputMessage","setInputMessage","isTyping","setIsTyping","messagesEndRef","inputRef","getTimeBasedGreeting","_currentUser$displayN","hour","Date","getHours","name","displayName","split","concat","type","message","timestamp","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","_inputRef$current","focus","getUserName","_currentUser$displayN2","getBotResponse","input","lower","toLowerCase","match","greetings","Math","floor","random","length","responses","farewells","handleSend","trim","userMessage","currentInput","typingDelay","min","setTimeout","botResponse","prev","handleKeyPress","e","key","shiftKey","preventDefault","getUserAvatar","_currentUser$displayN3","photoURL","src","alt","style","width","height","borderRadius","objectFit","initials","map","n","join","substring","toUpperCase","children","className","onClick","title","size","msg","index","ref","placeholder","value","onChange","target","onKeyPress","rows","disabled"],"sources":["/run/media/thobbs/EastManPhoenyXP/WALEKI_FRONTEND/WALEKI-FRONT/src/components/Chatbot.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { MessageCircle, X, Send, Minimize2, Maximize2 } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst Chatbot = () => {\n  const { currentUser } = useAuth();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Get time-based greeting\n  const getTimeBasedGreeting = () => {\n    const hour = new Date().getHours();\n    const name = currentUser?.displayName?.split(' ')[0] || 'there';\n    \n    if (hour >= 5 && hour < 12) {\n      return `Good morning, ${name}! ‚òÄÔ∏è Ready to monitor your water wells today?`;\n    } else if (hour >= 12 && hour < 17) {\n      return `Good afternoon, ${name}! üëã How can I help with your water monitoring?`;\n    } else if (hour >= 17 && hour < 21) {\n      return `Good evening, ${name}! üåÜ What can I assist you with?`;\n    } else {\n      return `Hey ${name}! üåô Working late? I'm here to help!`;\n    }\n  };\n\n  // Initialize with time-based greeting\n  useEffect(() => {\n    setMessages([\n      {\n        type: 'bot',\n        message: getTimeBasedGreeting(),\n        timestamp: new Date()\n      }\n    ]);\n  }, [currentUser]);\n\n  // Auto-scroll to bottom\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Focus input when opened\n  useEffect(() => {\n    if (isOpen && !isMinimized) {\n      inputRef.current?.focus();\n    }\n  }, [isOpen, isMinimized]);\n\n  // Get user's first name\n  const getUserName = () => {\n    return currentUser?.displayName?.split(' ')[0] || 'friend';\n  };\n\n  // Enhanced AI Response Logic with more human-like interactions\n  const getBotResponse = (input) => {\n    const lower = input.toLowerCase();\n    const name = getUserName();\n\n    // Greetings with time awareness\n    if (lower.match(/^(hi|hello|hey|good morning|good afternoon|good evening|sup|yo|hola)/)) {\n      const hour = new Date().getHours();\n      const greetings = [\n        `Hey ${name}! üòä What brings you here today?`,\n        `Hello! I'm all ears. What would you like to know?`,\n        `Hi there! Ready to tackle some water monitoring questions?`,\n        hour < 12 ? `Good morning! ‚òï How can I brighten your day?` : `Hey! üëã What's on your mind?`\n      ];\n      return greetings[Math.floor(Math.random() * greetings.length)];\n    }\n\n    // How are you / Personal\n    if (lower.match(/(how are you|how're you|hows it going|whats up|wassup)/)) {\n      return `I'm doing great, thanks for asking! üòä As an AI assistant, I'm always ready to help. How about you? Everything running smoothly with your water monitoring system?`;\n    }\n\n    // Thank you responses\n    if (lower.match(/(thank|thanks|thx|appreciate|grateful)/)) {\n      const responses = [\n        `You're very welcome, ${name}! üòä Happy to help anytime!`,\n        `My pleasure! That's what I'm here for. Need anything else?`,\n        `Glad I could help! Feel free to ask me anything else.`,\n        `You're welcome! Don't hesitate to reach out if you need more help! üëç`\n      ];\n      return responses[Math.floor(Math.random() * responses.length)];\n    }\n\n    // Goodbye / See you\n    if (lower.match(/(bye|goodbye|see you|later|gtg|gotta go)/)) {\n      const hour = new Date().getHours();\n      const farewells = [\n        `Goodbye, ${name}! Have a wonderful ${hour < 17 ? 'day' : 'evening'}! üëã`,\n        `See you later! Don't hesitate to come back if you need help! üòä`,\n        `Take care! Your water wells are in good hands! üíß`,\n        `Catch you later! Stay hydrated! üí¶üòÑ`\n      ];\n      return farewells[Math.floor(Math.random() * farewells.length)];\n    }\n\n    // Good / Great / Awesome responses\n    if (lower.match(/^(good|great|awesome|excellent|perfect|nice|cool|wonderful)/)) {\n      return `That's awesome to hear! üéâ Is there anything else I can help you with?`;\n    }\n\n    // Yes / No responses\n    if (lower === 'yes' || lower === 'yeah' || lower === 'yep' || lower === 'sure') {\n      return `Great! What would you like to know about? I can help with:\\n‚Ä¢ Adding nodes\\n‚Ä¢ Troubleshooting issues\\n‚Ä¢ Understanding calculations\\n‚Ä¢ System settings\\n\\nJust ask away! üòä`;\n    }\n\n    if (lower === 'no' || lower === 'nope' || lower === 'nah') {\n      return `No worries! I'm here whenever you need me. Feel free to ask if anything comes up! üëç`;\n    }\n\n    // Who are you / About bot\n    if (lower.match(/(who are you|what are you|your name|about you)/)) {\n      return `I'm Waleki Assistant! ü§ñ Your friendly AI helper for all things water monitoring.\\n\\nI can help you with:\\n‚Ä¢ Setting up sensor nodes\\n‚Ä¢ Understanding water calculations\\n‚Ä¢ Troubleshooting problems\\n‚Ä¢ Navigating the system\\n‚Ä¢ And much more!\\n\\nThink of me as your 24/7 water monitoring expert! üíß`;\n    }\n\n    // Add node - detailed\n    if (lower.match(/(add|create|setup|install|new).*(node|sensor|device)/)) {\n      return `Great! Let me walk you through adding a new sensor node! üéØ\\n\\n**Step-by-step:**\\n1Ô∏è‚É£ Go to **Settings** ‚Üí **Nodes tab**\\n2Ô∏è‚É£ Scroll to the form at bottom\\n3Ô∏è‚É£ Enter **Node ID** (like \"Node4\" or \"Well-East\")\\n4Ô∏è‚É£ Enter **Cable Length (h‚ÇÅ)** in meters\\n   üìè *This is SUPER important - measure carefully!*\\n5Ô∏è‚É£ Add **Location** (e.g., \"Mwanza Region\")\\n6Ô∏è‚É£ Check **\"Activate immediately\"** if ready\\n7Ô∏è‚É£ Click **\"Add Node\"** button\\n\\n‚úÖ Done! Your node will show up in the Dashboard!\\n\\nNeed help measuring cable length? Just ask! üòä`;\n    }\n\n    // Cable length / h1 - detailed\n    if (lower.match(/(cable|h1|h‚ÇÅ|measure|length|depth)/)) {\n      return `Ah, cable length - the foundation of accurate readings! üìè\\n\\n**What is h‚ÇÅ?**\\nIt's the total distance from ground surface to the END of your sensor cable.\\n\\n**Why is it critical?**\\nWater Height = h‚ÇÅ - h‚ÇÇ\\n‚Ä¢ h‚ÇÅ = Your cable length (FIXED, you measure once)\\n‚Ä¢ h‚ÇÇ = Sensor reading (CHANGES, real-time from sensor)\\n‚Ä¢ H = Actual water height (CALCULATED)\\n\\n**Example:**\\n‚Ä¢ Cable goes down 50 meters (h‚ÇÅ = 50m)\\n‚Ä¢ Sensor reads 45m from surface (h‚ÇÇ = 45m)\\n‚Ä¢ Water height = 50 - 45 = **5 meters of water** üíß\\n\\n**Pro tip:** If your water shows 0m but there IS water, your h‚ÇÅ is probably too small! Remeasure and update it in Settings.\\n\\nMake sense? Let me know if you need clarification! ü§ì`;\n    }\n\n    // Notifications / Alerts - detailed\n    if (lower.match(/(notification|alert|push|bell|email|sms)/)) {\n      return `Let's get you set up with notifications! üîî\\n\\n**Quick Setup:**\\n1Ô∏è‚É£ Click the **bell icon (üîî)** in the navbar\\n2Ô∏è‚É£ Click **\"Enable Notifications\"**\\n3Ô∏è‚É£ Allow permissions when browser asks\\n4Ô∏è‚É£ You'll get a test notification!\\n\\n**You'll receive alerts for:**\\nüö® **Critical:** Sensor offline, no water\\n‚ö†Ô∏è **Warning:** Low water, battery low\\n‚ÑπÔ∏è **Info:** Sensor back online, daily reports\\n\\n**Want to customize?**\\nGo to Settings ‚Üí System to adjust:\\n‚Ä¢ How often to check\\n‚Ä¢ When to alert\\n‚Ä¢ Which alert types\\n\\n**Pro tip:** You can also get SMS & email alerts! Check Settings ‚Üí Preferences to enable them.\\n\\nLet me know if you hit any snags! üòä`;\n    }\n\n    // Offline sensor - detailed\n    if (lower.match(/(offline|not working|down|disconnected|no signal|connection)/)) {\n      return `Sensor offline? Don't worry, let's troubleshoot! üîß\\n\\n**Quick Checks:**\\n\\n1Ô∏è‚É£ **Power Supply**\\n   ‚úì Is the sensor powered on?\\n   ‚úì Check battery level\\n   ‚úì Solar panel clean and working?\\n\\n2Ô∏è‚É£ **Physical Connections**\\n   ‚úì All cables firmly connected?\\n   ‚úì No visible damage to wires?\\n   ‚úì Waterproof seals intact?\\n\\n3Ô∏è‚É£ **Sensor Position**\\n   ‚úì Is sensor within 5m of cable end?\\n   ‚úì Any obstructions?\\n   ‚úì Proper alignment?\\n\\n4Ô∏è‚É£ **Check System Logs**\\n   üìä Go to **Health** ‚Üí **System Logs**\\n   Look for error messages\\n\\n5Ô∏è‚É£ **Network Range**\\n   üì° Too far from gateway? (Max 2-15km)\\n   Buildings blocking signal?\\n\\n**Still offline?**\\nTry a soft reset: Power off ‚Üí Wait 30s ‚Üí Power on\\n\\nIf nothing works, our support team is ready! Contact: support@waleki.com\\n\\nHope this helps! ü§û`;\n    }\n\n    // Water shows 0m - detailed\n    if (lower.match(/(water.*0|zero.*water|shows.*0|0.*meter|no.*water|empty)/)) {\n      return `Water showing 0m but you know there's water? I can fix that! üíß\\n\\n**The Problem:**\\nThis happens when h‚ÇÇ ‚â• h‚ÇÅ (sensor reading ‚â• cable length)\\n\\n**Translation:**\\nThe sensor thinks it's reading deeper than your cable reaches, which is impossible! So it displays 0m.\\n\\n**The Solution:**\\n\\n1Ô∏è‚É£ **Check Your h‚ÇÅ (Cable Length):**\\n   ‚Ä¢ Go to **Settings** ‚Üí **Nodes tab**\\n   ‚Ä¢ Find your node in the list\\n   ‚Ä¢ Check the h‚ÇÅ value - is it correct?\\n\\n2Ô∏è‚É£ **Update if Wrong:**\\n   ‚Ä¢ Click the **edit icon (‚úèÔ∏è)**\\n   ‚Ä¢ Enter the CORRECT cable length\\n   ‚Ä¢ Save changes\\n\\n3Ô∏è‚É£ **Verify:**\\n   ‚Ä¢ Go to Dashboard\\n   ‚Ä¢ Check if water height now shows correctly\\n\\n**Example Fix:**\\n‚ùå Before: h‚ÇÅ = 40m, h‚ÇÇ = 45m ‚Üí Shows 0m (ERROR!)\\n‚úÖ After: h‚ÇÅ = 50m, h‚ÇÇ = 45m ‚Üí Shows 5m (CORRECT!)\\n\\n**Pro Tip:** Always measure your cable length from ground surface to the ABSOLUTE END of the cable. Don't estimate - use a tape measure! üìè\\n\\nDid that solve it? Let me know! üòä`;\n    }\n\n    // Backup / Export - detailed\n    if (lower.match(/(backup|export|save|download|config)/)) {\n      return `Smart thinking - backups are crucial! üíæ\\n\\n**To Backup Your Configuration:**\\n\\n1Ô∏è‚É£ Go to **Settings** ‚Üí **Backup tab**\\n2Ô∏è‚É£ Click the big **\"Export\"** button\\n3Ô∏è‚É£ A JSON file downloads automatically\\n   üìÅ Filename: waleki-config-[timestamp].json\\n4Ô∏è‚É£ **Store it safely!**\\n   ‚Ä¢ Google Drive\\n   ‚Ä¢ Dropbox\\n   ‚Ä¢ External hard drive\\n   ‚Ä¢ USB stick\\n\\n**What's Included:**\\n‚úì All sensor node configurations\\n‚úì System settings\\n‚úì User preferences  \\n‚úì Alert thresholds\\n‚úì Notification settings\\n\\n**To Restore Later:**\\n‚Ä¢ Same tab, click **\"Import\"**\\n‚Ä¢ Select your backup file\\n‚Ä¢ Confirm (it will overwrite current settings)\\n\\n**Pro Tip:** Make backups:\\n‚Ä¢ Before major changes\\n‚Ä¢ Once a month\\n‚Ä¢ Before system updates\\n\\nYour future self will thank you! üôè`;\n    }\n\n    // Dashboard / Pages / Navigation\n    if (lower.match(/(dashboard|page|where|navigate|go to|find)/)) {\n      return `Let me give you a tour of Waleki! üó∫Ô∏è\\n\\n**Main Pages:**\\n\\nüè† **Dashboard** - Your home base\\n   ‚Ä¢ See all active nodes at once\\n   ‚Ä¢ Real-time water levels\\n   ‚Ä¢ Status indicators\\n   ‚Ä¢ Quick stats\\n\\nüìä **Monitor** - Deep dive single nodes\\n   ‚Ä¢ Select specific node\\n   ‚Ä¢ Live sensor data\\n   ‚Ä¢ Detailed readings\\n   ‚Ä¢ Historical mini-chart\\n\\nüìà **Analytics** - Data analysis paradise\\n   ‚Ä¢ Compare multiple nodes\\n   ‚Ä¢ Charts & graphs\\n   ‚Ä¢ Export data (CSV/JSON)\\n   ‚Ä¢ Custom date ranges\\n\\nüè• **Health** - System diagnostics\\n   ‚Ä¢ All nodes overview\\n   ‚Ä¢ System logs\\n   ‚Ä¢ Error tracking\\n   ‚Ä¢ Performance metrics\\n\\n‚öôÔ∏è **Settings** - Configuration central\\n   ‚Ä¢ Add/edit nodes\\n   ‚Ä¢ System settings\\n   ‚Ä¢ Backup/restore\\n   ‚Ä¢ Preferences\\n\\nüë§ **Profile** - Your account\\n   ‚Ä¢ Personal info\\n   ‚Ä¢ Security settings\\n   ‚Ä¢ Activity log\\n   ‚Ä¢ Data export\\n\\n‚ùì **Help** - Knowledge base\\n   ‚Ä¢ FAQs\\n   ‚Ä¢ Tutorials\\n   ‚Ä¢ Contact support\\n\\nWhere would you like to go? üòä`;\n    }\n\n    // Status colors / Indicators\n    if (lower.match(/(status|color|indicator|green|red|yellow|orange|meaning)/)) {\n      return `Let me decode those colors for you! üé®\\n\\n**Node Status Colors:**\\n\\nüü¢ **Active (Green)** - All good!\\n   ‚Ä¢ Water level > 10 meters\\n   ‚Ä¢ Sensor online & working\\n   ‚Ä¢ No issues detected\\n   ‚Ä¢ Keep monitoring normally\\n\\nüü° **Warning (Yellow)** - Pay attention\\n   ‚Ä¢ Water level 5-10 meters\\n   ‚Ä¢ Still safe, but decreasing\\n   ‚Ä¢ Monitor more frequently\\n   ‚Ä¢ Consider water conservation\\n\\nüü† **Low (Orange)** - Take action soon\\n   ‚Ä¢ Water level 0-5 meters\\n   ‚Ä¢ Getting critically low\\n   ‚Ä¢ Plan alternative sources\\n   ‚Ä¢ Alert relevant people\\n\\nüî¥ **Critical (Red)** - Immediate action!\\n   ‚Ä¢ Water ‚â§ 0 meters (empty/error)\\n   ‚Ä¢ Sensor offline for 5+ minutes\\n   ‚Ä¢ System error detected\\n   ‚Ä¢ Check sensor immediately!\\n\\n‚ö™ **Inactive (Gray)** - Not monitoring\\n   ‚Ä¢ Node exists but deactivated\\n   ‚Ä¢ Not collecting data\\n   ‚Ä¢ Enable in Settings if needed\\n\\n**Pro Tip:** You can customize these thresholds in Settings ‚Üí System to match your specific needs!\\n\\nMake sense? üëç`;\n    }\n\n    // Formula / Math / Calculation\n    if (lower.match(/(formula|calculate|math|equation|h1|h2)/)) {\n      return `Let's break down the water height formula! üßÆ\\n\\n**The Formula:**\\n**H = h‚ÇÅ - h‚ÇÇ**\\n\\nSimple subtraction, but each variable is critical!\\n\\n**What Each Means:**\\n\\nüìè **h‚ÇÅ** (Cable Length)\\n   ‚Ä¢ Distance: Ground ‚Üí End of cable\\n   ‚Ä¢ FIXED value (you measure once)\\n   ‚Ä¢ YOU set this in Settings\\n   ‚Ä¢ Must be VERY accurate!\\n\\nüì° **h‚ÇÇ** (Sensor Reading)\\n   ‚Ä¢ Distance: Ground ‚Üí Water surface\\n   ‚Ä¢ CHANGES in real-time\\n   ‚Ä¢ From ultrasonic sensor\\n   ‚Ä¢ Updates automatically\\n\\nüíß **H** (Water Height)\\n   ‚Ä¢ Actual water depth in well\\n   ‚Ä¢ CALCULATED automatically\\n   ‚Ä¢ h‚ÇÅ minus h‚ÇÇ\\n   ‚Ä¢ What you see on Dashboard\\n\\n**Real Example:**\\nYour well setup:\\n‚Ä¢ Cable goes 50m deep (h‚ÇÅ = 50)\\n‚Ä¢ Sensor reads 45m to water (h‚ÇÇ = 45)\\n‚Ä¢ Water depth: 50 - 45 = **5 meters** ‚úÖ\\n\\nAs water rises:\\n‚Ä¢ h‚ÇÇ becomes 40m\\n‚Ä¢ H = 50 - 40 = **10 meters** ‚úÖ\\n\\nAs water lowers:\\n‚Ä¢ h‚ÇÇ becomes 48m  \\n‚Ä¢ H = 50 - 48 = **2 meters** (Low!) ‚ö†Ô∏è\\n\\nIf h‚ÇÇ ‚â• h‚ÇÅ:\\n‚Ä¢ Math gives negative\\n‚Ä¢ System shows 0m (error)\\n‚Ä¢ Check your h‚ÇÅ value!\\n\\nCrystal clear? üíé`;\n    }\n\n    // Password / Login / Security\n    if (lower.match(/(password|login|forgot|reset|security|2fa|two factor)/)) {\n      return `Let's secure your account! üîê\\n\\n**Change Password:**\\n1Ô∏è‚É£ Go to **Profile** ‚Üí **Security tab**\\n2Ô∏è‚É£ Enter current password\\n3Ô∏è‚É£ Enter new password (min 6 chars)\\n4Ô∏è‚É£ Confirm new password\\n5Ô∏è‚É£ Click \"Change Password\"\\n6Ô∏è‚É£ You'll be logged out - sign in again\\n\\n**Forgot Password:**\\n‚Ä¢ Go to Login page\\n‚Ä¢ Click \"Forgot Password?\" link\\n‚Ä¢ Enter your email\\n‚Ä¢ Check inbox for reset link\\n‚Ä¢ Link valid for 1 hour\\n‚Ä¢ Set new password\\n\\n**Enable Two-Factor Authentication:**\\n1Ô∏è‚É£ Profile ‚Üí Security tab\\n2Ô∏è‚É£ Find \"Two-Factor Authentication\"\\n3Ô∏è‚É£ Click \"Enable 2FA\"\\n4Ô∏è‚É£ Follow setup wizard\\n5Ô∏è‚É£ Scan QR code with authenticator app\\n6Ô∏è‚É£ Enter verification code\\n\\n**Security Tips:**\\n‚úì Use strong, unique passwords\\n‚úì Enable 2FA for extra security\\n‚úì Don't share login credentials\\n‚úì Log out on shared devices\\n‚úì Check activity log regularly\\n\\nYour account, your fortress! üè∞`;\n    }\n\n    // Help / Support / Contact\n    if (lower.match(/(help|support|contact|call|email|assistance|stuck)/)) {\n      return `I'm here to help, and so is our team! ü§ù\\n\\n**Get Support:**\\n\\nüìß **Email Support**\\n   ‚Ä¢ support@waleki.com\\n   ‚Ä¢ Response time: < 24 hours\\n   ‚Ä¢ Include screenshots if possible\\n   ‚Ä¢ Mention your node IDs\\n\\nüìû **Phone Support**\\n   ‚Ä¢ +255 XXX XXX XXX\\n   ‚Ä¢ Mon-Fri: 8 AM - 6 PM EAT\\n   ‚Ä¢ Weekend: Emergency only\\n   ‚Ä¢ Have account info ready\\n\\nüí¨ **Live Chat**\\n   ‚Ä¢ Right here with me! (for quick questions)\\n   ‚Ä¢ 24/7 availability\\n   ‚Ä¢ Instant responses\\n   ‚Ä¢ No waiting!\\n\\nüìö **Help Center**\\n   ‚Ä¢ Click \"Help\" in navbar\\n   ‚Ä¢ 30+ detailed articles\\n   ‚Ä¢ Step-by-step guides\\n   ‚Ä¢ Search by keyword\\n\\n**What I Can Help With:**\\n‚úì Adding/configuring nodes\\n‚úì Understanding readings\\n‚úì Troubleshooting issues\\n‚úì System navigation\\n‚úì Calculations & formulas\\n‚úì Settings & preferences\\n‚úì Quick how-tos\\n\\nWhat do you need help with? üòä`;\n    }\n\n    // Default / Unknown\n    return `Hmm, I'm not quite sure about that one! ü§î\\n\\nBut I'm always learning! Here's what I'm really good at:\\n\\n**Popular Topics:**\\n‚Ä¢ üîß \"How do I add a node?\"\\n‚Ä¢ üíß \"Why does water show 0m?\"\\n‚Ä¢ üîî \"Enable notifications\"\\n‚Ä¢ üìè \"Explain the water formula\"\\n‚Ä¢ üö® \"Sensor is offline\"\\n‚Ä¢ ‚öôÔ∏è \"Change settings\"\\n‚Ä¢ üíæ \"Backup my configuration\"\\n‚Ä¢ üìä \"View analytics\"\\n‚Ä¢ üîê \"Reset my password\"\\n\\n**Or Just Chat:**\\n‚Ä¢ Ask how I'm doing\\n‚Ä¢ Say hello\\n‚Ä¢ Tell me what you need\\n\\nI'm here to help! What's on your mind? üòä`;\n  };\n\n  // Handle send message\n  const handleSend = () => {\n    if (!inputMessage.trim()) return;\n\n    // Add user message\n    const userMessage = {\n      type: 'user',\n      message: inputMessage,\n      timestamp: new Date()\n    };\n    setMessages([...messages, userMessage]);\n    const currentInput = inputMessage;\n    setInputMessage('');\n\n    // Show typing indicator\n    setIsTyping(true);\n\n    // Simulate realistic typing delay (longer for longer responses)\n    const typingDelay = Math.min(800 + (currentInput.length * 20), 2000);\n    \n    setTimeout(() => {\n      const botResponse = {\n        type: 'bot',\n        message: getBotResponse(currentInput),\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botResponse]);\n      setIsTyping(false);\n    }, typingDelay);\n  };\n\n  // Handle key press\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // Get user avatar (profile photo or initials)\n  const getUserAvatar = () => {\n    if (currentUser?.photoURL) {\n      return <img src={currentUser.photoURL} alt=\"You\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} />;\n    }\n    const initials = currentUser?.displayName\n      ?.split(' ')\n      .map(n => n[0])\n      .join('')\n      .substring(0, 2)\n      .toUpperCase() || 'U';\n    return <span>{initials}</span>;\n  };\n\n  return (\n    <>\n      <style jsx>{`\n        @keyframes slideUp {\n          from {\n            transform: translateY(100px);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes pulse {\n          0%, 100% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n        }\n\n        @keyframes typing {\n          0%, 100% {\n            opacity: 0.3;\n          }\n          50% {\n            opacity: 1;\n          }\n        }\n\n        .chatbot-container {\n          position: fixed;\n          bottom: 24px;\n          right: 24px;\n          z-index: 9999;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n        }\n\n        /* Avatar Button */\n        .chatbot-avatar {\n          width: 64px;\n          height: 64px;\n          background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n          transition: all 0.3s ease;\n          border: 4px solid white;\n          color: white;\n          animation: pulse 2s ease-in-out infinite;\n        }\n\n        .chatbot-avatar:hover {\n          transform: scale(1.1);\n          box-shadow: 0 12px 32px rgba(0, 0, 0, 0.6);\n        }\n\n        .chatbot-avatar.open {\n          animation: none;\n        }\n\n        /* Chat Window */\n        .chat-window {\n          position: absolute;\n          bottom: 80px;\n          right: 0;\n          width: 400px;\n          max-height: ${isMinimized ? '60px' : '600px'};\n          background: white;\n          border-radius: 16px;\n          box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n          animation: slideUp 0.3s ease;\n          transition: max-height 0.3s ease;\n        }\n\n        /* Header */\n        .chat-header {\n          padding: 20px;\n          background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\n          color: white;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .header-info {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .header-avatar {\n          width: 40px;\n          height: 40px;\n          background: rgba(255, 255, 255, 0.2);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          backdrop-filter: blur(10px);\n        }\n\n        .header-text h3 {\n          font-size: 16px;\n          font-weight: 700;\n          margin-bottom: 2px;\n        }\n\n        .header-text p {\n          font-size: 12px;\n          opacity: 0.9;\n        }\n\n        .header-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .header-btn {\n          width: 32px;\n          height: 32px;\n          background: rgba(255, 255, 255, 0.2);\n          border: none;\n          border-radius: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          color: white;\n          backdrop-filter: blur(10px);\n        }\n\n        .header-btn:hover {\n          background: rgba(255, 255, 255, 0.3);\n        }\n\n        /* Messages */\n        .chat-messages {\n          flex: 1;\n          padding: 20px;\n          overflow-y: auto;\n          display: ${isMinimized ? 'none' : 'flex'};\n          flex-direction: column;\n          gap: 16px;\n          background: #FAFAFA;\n          max-height: 440px;\n        }\n\n        .chat-messages::-webkit-scrollbar {\n          width: 6px;\n        }\n\n        .chat-messages::-webkit-scrollbar-track {\n          background: #F0F0F0;\n        }\n\n        .chat-messages::-webkit-scrollbar-thumb {\n          background: #CCC;\n          border-radius: 3px;\n        }\n\n        .message {\n          display: flex;\n          gap: 10px;\n          animation: slideUp 0.2s ease;\n        }\n\n        .message.user {\n          flex-direction: row-reverse;\n        }\n\n        .message-avatar {\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          font-size: 14px;\n          font-weight: 700;\n        }\n\n        .message-avatar.bot {\n          background: #000;\n          color: white;\n        }\n\n        .message-avatar.user {\n          background: #E8E8E8;\n          color: #000;\n        }\n\n        .message-content {\n          max-width: 75%;\n          padding: 12px 16px;\n          border-radius: 12px;\n          font-size: 14px;\n          line-height: 1.6;\n          white-space: pre-line;\n        }\n\n        .message.bot .message-content {\n          background: white;\n          color: #000;\n          border: 1px solid #E8E8E8;\n        }\n\n        .message.user .message-content {\n          background: #000;\n          color: white;\n        }\n\n        .message-content strong {\n          font-weight: 700;\n        }\n\n        /* Typing Indicator */\n        .typing-indicator {\n          display: flex;\n          gap: 10px;\n          padding: 12px 16px;\n          background: white;\n          border-radius: 12px;\n          width: fit-content;\n          border: 1px solid #E8E8E8;\n        }\n\n        .typing-dot {\n          width: 8px;\n          height: 8px;\n          background: #999;\n          border-radius: 50%;\n          animation: typing 1.4s ease-in-out infinite;\n        }\n\n        .typing-dot:nth-child(2) {\n          animation-delay: 0.2s;\n        }\n\n        .typing-dot:nth-child(3) {\n          animation-delay: 0.4s;\n        }\n\n        /* Input */\n        .chat-input-wrapper {\n          padding: 16px;\n          background: white;\n          border-top: 1px solid #E8E8E8;\n          display: ${isMinimized ? 'none' : 'flex'};\n          gap: 12px;\n        }\n\n        .chat-input {\n          flex: 1;\n          padding: 12px 16px;\n          border: 2px solid #E8E8E8;\n          border-radius: 12px;\n          font-size: 14px;\n          outline: none;\n          transition: all 0.2s ease;\n          font-family: inherit;\n          resize: none;\n          max-height: 100px;\n        }\n\n        .chat-input:focus {\n          border-color: #000;\n        }\n\n        .send-btn {\n          width: 44px;\n          height: 44px;\n          background: #000;\n          color: white;\n          border: none;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          flex-shrink: 0;\n        }\n\n        .send-btn:hover {\n          transform: scale(1.05);\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);\n        }\n\n        .send-btn:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        /* Responsive */\n        @media (max-width: 640px) {\n          .chat-window {\n            width: calc(100vw - 48px);\n            max-width: 400px;\n          }\n\n          .chatbot-container {\n            right: 16px;\n            bottom: 16px;\n          }\n        }\n      `}</style>\n\n      <div className=\"chatbot-container\">\n        {/* Chat Window */}\n        {isOpen && (\n          <div className=\"chat-window\">\n            {/* Header */}\n            <div className=\"chat-header\">\n              <div className=\"header-info\">\n<div className=\"header-avatar\">\n  <img src=\"/assets/chatbot.png\" alt=\"Bot\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} />\n</div>\n                <div className=\"header-text\">\n                  <h3>Waleki Assistant</h3>\n                  <p>Always here to help</p>\n                </div>\n              </div>\n              <div className=\"header-actions\">\n                <button\n                  className=\"header-btn\"\n                  onClick={() => setIsMinimized(!isMinimized)}\n                  title={isMinimized ? 'Maximize' : 'Minimize'}\n                >\n                  {isMinimized ? <Maximize2 size={16} /> : <Minimize2 size={16} />}\n                </button>\n                <button\n                  className=\"header-btn\"\n                  onClick={() => setIsOpen(false)}\n                  title=\"Close\"\n                >\n                  <X size={16} />\n                </button>\n              </div>\n            </div>\n\n            {/* Messages */}\n            <div className=\"chat-messages\">\n              {messages.map((msg, index) => (\n                <div key={index} className={`message ${msg.type}`}>\n                  <div className={`message-avatar ${msg.type}`}>\n                    {msg.type === 'bot' ? (\n    <img src=\"/assets/chatbot.png\" alt=\"Bot\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} />\n  ) : (\n    getUserAvatar()\n  )}\n                  </div>\n                  <div className=\"message-content\">{msg.message}</div>\n                </div>\n              ))}\n\n              {/* Typing Indicator */}\n                {isTyping && (\n  <div className=\"message bot\">\n    <div className=\"message-avatar bot\">\n      <img src=\"/assets/chatbot.png\" alt=\"Bot\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} />\n    </div>\n    <div className=\"typing-indicator\">\n                    <div className=\"typing-dot\"></div>\n                    <div className=\"typing-dot\"></div>\n                    <div className=\"typing-dot\"></div>\n                  </div>\n                </div>\n              )}\n\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input */}\n            <div className=\"chat-input-wrapper\">\n              <textarea\n                ref={inputRef}\n                className=\"chat-input\"\n                placeholder=\"Type your message...\"\n                value={inputMessage}\n                onChange={(e) => setInputMessage(e.target.value)}\n                onKeyPress={handleKeyPress}\n                rows=\"1\"\n              />\n              <button\n                className=\"send-btn\"\n                onClick={handleSend}\n                disabled={!inputMessage.trim()}\n                title=\"Send message\"\n              >\n                <Send size={20} />\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Avatar Button */}\n<div\n  className={`chatbot-avatar ${isOpen ? 'open' : ''}`}\n  onClick={() => setIsOpen(!isOpen)}\n  title=\"Chat with Waleki Assistant\"\n>\n  {isOpen ? <X size={28} /> : (\n    <img src=\"/assets/chatbot.png\" alt=\"Bot\" style={{ width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover' }} />\n  )}\n</div>\n      </div>\n    </>\n  );\n};\n\nexport default Chatbot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}